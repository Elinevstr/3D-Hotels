<!DOCTYPE html>
<html>
  <head>
    <title>Travel App - Localyse Demo</title>
    <link rel="stylesheet" href="main.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
 
    <div class="expanded" id="main-header">
        <div class="fullscreen-inner">
            <div id="banner">
                <img src="imgs/roamly-logo.png" id="logo" alt="Roamly Travel App Logo" loading="lazy"/>
            </div>
            <div id="card-container">
                <button data-destination="rome" id="rome-card" class="destination-card"> 
                    <div class="card">
                        <div class="circle-wrapper">
                            <img src="imgs/rome.jpg" alt="Rome, Italy - Food and History" class="card-image" loading="lazy"/>
                            <p class="arc-text arc-top">Food and History</p>
                            <p class="arc-text arc-bottom">in Rome</p>
                        </div>
                    </div>
                </button>
                <button data-destination="newyork" id="ny-card" class="destination-card"> 
                    <div class="card">
                        <div class="circle-wrapper">
                            <img src="imgs/new-york.jpg" alt="New York City - Nightlife and Food" class="card-image" loading="lazy"/>
                            <p class="arc-text arc-top">Nightlife and Food</p>
                            <p class="arc-text arc-bottom">in New York City</p>
                        </div>
                    </div>
                </button>
                <button data-destination="zermatt" id="swiss-card" class="destination-card"> 
                    <div class="card">
                        <div class="circle-wrapper">
                            <img src="imgs/zermatt.jpg" alt="Zermatt, Switzerland - Nature and Wellness" class="card-image" loading="lazy"/>
                            <p class="arc-text arc-top">Nature and Wellness</p>
                            <p class="arc-text arc-bottom">in the Swiss mountains</p>
                        </div>
                    </div>
                </button>
                <button data-destination="tokyo" id="tokyo-card" class="destination-card"> 
                    <div class="card">
                        <div class="circle-wrapper">
                            <img src="imgs/tokyo.jpg" alt="Tokyo, Japan - Shopping and Entertainment" class="card-image" loading="lazy"/>
                            <p class="arc-text arc-top">Shopping and Entertainment</p>
                            <p class="arc-text arc-bottom">in Tokyo</p>
                        </div>
                    </div>
                </button>
                <button data-destination="random" id="random-card" class="destination-card"> 
                    <div class="card">
                        <div class="circle-wrapper">
                            <img src="imgs/randomlocation.png" alt="Random surprise destination" class="card-image" loading="lazy"/>
                            <p class="arc-text arc-top">Surprise</p>
                            <p class="arc-text arc-bottom">location</p>
                        </div>
                    </div>
                </button>
            </div>
        </div>
        
        <div id="dropdown-container">
            <img src="imgs/roamly-logo.png" id="dropdown-logo" alt="Roamly Logo" loading="lazy"/>
            <p>I want to go to</p>
            <div class="place-autocomplete-card" id="place-autocomplete-card" role="search"></div>

            <label for="category-dropdown1">And I prefer</label>
            <select id="category-dropdown1" class="category-dropdown" aria-label="First preference category"></select>

            <label for="category-dropdown2">and</label>
            <select id="category-dropdown2" class="category-dropdown" aria-label="Second preference category"></select>
            
            <button id="gobutton" type="button" aria-label="Search for hotels and attractions">Search</button>
        </div>
    </div>

    <main class="main-container">
        <section class="content" aria-label="Map and location details">
            <div id="map" style="display: none;" role="application" aria-label="Interactive 3D map"></div>
            <div id="overlay-container">
                <div id="public-transport-info" class="info-box" style="display:none; align-items:center; gap: 6px; margin-top: 8px;">
              <p>🚉 <span id="public-transport-count">0</span> public transport stops within 100 metres.</p>
            </div>
            <div id="weather-info" class="info-box" aria-live="polite"></div>
           
          </div>
            <button id="reset-camera-button" style="display: none;" type="button" aria-label="Reset camera view">Zoom out</button>
            
            <!-- Improved popup with better accessibility -->
            <div id="detail-popup" class="detail-popup" role="dialog" aria-labelledby="sponsored-hotel-name" aria-hidden="true">
                <button class="close-btn" type="button" aria-label="Close popup">✖</button>
                <div id="detail-popup-container" aria-live="polite"></div>
            </div>
        </section>

        <aside class="sidebar" role="complementary" aria-label="Hotel listings and controls">
            <div id="button-container" role="toolbar" aria-label="Navigation controls">
                <button id="back-to-all-hotels-button" class="sidebar-button" style="display: none" type="button">
                    Back to Hotels
                </button>
                <button id="back-to-hotel-button" class="sidebar-button" style="display: none" type="button">
                    Back to Hotel
                </button>
                <button id="gen-route-button" class="sidebar-button" style="display: none" type="button">
                    Generate walking route
                </button>
            </div>
            
            <!-- Loading state with better UX -->
            <div id="ai-route-loading" style="display: none;" role="status" aria-live="polite">
                <div id="loading-steps-container" aria-label="Loading progress"></div>
            </div>

            <!-- Route results -->
            <div id="ai-route-container" style="display: none;" role="region" aria-labelledby="ai-route-summary">
                <div id="ai-route-summary"></div>
                <div id="ai-route-stops" role="list" aria-label="Route stops"></div>
            </div>
            
            <h3 id="location-title" aria-live="polite"></h3>
            <p id="location-subtitle" aria-live="polite"></p>
           
            <div class="list-container">
                <gmp-place-search orientation="vertical" selectable role="listbox" aria-label="Hotel search results">
                    <gmp-place-all-content></gmp-place-all-content>
                    <gmp-place-text-search-request></gmp-place-text-search-request>
                </gmp-place-search>

                <gmp-place-details style="display: none" role="region" aria-label="Hotel details">
                    <gmp-place-details-place-request></gmp-place-details-place-request>
                    <gmp-place-content-config>
            <gmp-place-address></gmp-place-address>
            <gmp-place-rating></gmp-place-rating>
            <gmp-place-price></gmp-place-price>
            <gmp-place-accessible-entrance-icon></gmp-place-accessible-entrance-icon>
            <gmp-place-opening-hours></gmp-place-opening-hours>
            <gmp-place-website></gmp-place-website>
            <gmp-place-phone-number></gmp-place-phone-number>
            <gmp-place-summary></gmp-place-summary>
            <gmp-place-type-specific-highlights></gmp-place-type-specific-highlights>
            <gmp-place-reviews></gmp-place-reviews>
            <gmp-place-feature-list></gmp-place-feature-list>
            <gmp-place-media lightbox-preferred></gmp-place-media>
            <gmp-place-attribution
              light-scheme-color="black"
              dark-scheme-color="black"
            ></gmp-place-attribution>
          </gmp-place-content-config>
        </gmp-place-details>
            </div>
      </div>

    </div>

    <script>
      ((g) => {
        var h,
          a,
          k,
          p = "The Google Maps JavaScript API",
          c = "google",
          l = "importLibrary",
          q = "__ib__",
          m = document,
          b = window;
        b = b[c] || (b[c] = {});
        var d = b.maps || (b.maps = {}),
          r = new Set(),
          e = new URLSearchParams(),
          u = () =>
            h ||
            (h = new Promise(async (f, n) => {
              await (a = m.createElement("script"));
              e.set("libraries", [...r] + "");
              for (k in g)
                e.set(
                  k.replace(/[A-Z]/g, (t) => "_" + t[0].toLowerCase()),
                  g[k]
                );
              e.set("callback", c + ".maps." + q);
              a.src = `https://maps.${c}apis.com/maps/api/js?` + e;
              d[q] = f;
              a.onerror = () => (h = n(Error(p + " could not load.")));
              a.nonce = m.querySelector("script[nonce]")?.nonce || "";
              m.head.append(a);
            }));
        d[l]
          ? console.warn(p + " only loads once. Ignoring:", g)
          : (d[l] = (f, ...n) => r.add(f) && u().then(() => d[l](f, ...n)));
      })({ key: "AIzaSyCVNX6mCprAYiGp8RUaf9yc6H-00fLR1Ns", v: "alpha" });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/circletype@2.3.0/dist/circletype.min.js"></script>
    <script src="main.js"></script>
    <script>
      $(document).ready(function () {
  $('.arc-top, .arc-bottom').each(function () {
    let $this = $(this);
    let parentId = $this.closest('button').attr('id');
    let radius;

    switch (parentId) {
      case 'rome-card':
        radius = 125; // Half of 200px image width
        break;
      case 'ny-card':
        radius = 115;  // Half of 180px
        break;
      case 'swiss-card':
        radius = 110;  // Half of 170px
        break;
      case 'tokyo-card':
        radius = 130; // Half of 210px
        break;
      case 'random-card':
        radius = 90; // Half of 210px
        break;
      default:
        radius = 200; // fallback
    }

    const circle = new CircleType(this).radius(radius);
    if ($this.hasClass('arc-bottom')) {
      circle.dir(-1);
    }
  });
});
    </script>
  </body>
  <footer>
    <p>Made with ❤️ by <a href="https://www.linkedin.com/in/elinevanstraaten/">Eline van Straaten</a></p>
  </footer>
</html>
